<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>macOS Big Sur UI</title>
  <style>
:root {
  --bg-primary:#ffffff;
  --bg-secondary:#f2f2f7;
  --bg-sidebar:#f5f5f7;
  --text-primary:#000000;
  --text-secondary:#666666;
  --text-white:#ffffff;
  --accent-blue:#007AFF;
  --accent-red:#FF3B30;
  --border-light:#e5e5ea;
  --radius:12px;
  --transition:0.25s;
}
[data-theme="dark"] {
  --bg-primary:#000000;
  --bg-secondary:#1c1c1e;
  --bg-sidebar:#2c2c2e;
  --text-primary:#ffffff;
  --text-secondary:#ebebf5;
  --text-white:#ffffff;
  --accent-blue:#0A84FF;
  --accent-red:#FF453A;
  --border-light:#38383a;
}

body{
  margin:0;
  font-family:-apple-system, BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  background:url("./assets/wallpaper.jpg") center/cover no-repeat fixed;
  color: var(--text-primary);
  overflow:hidden;
  height:100vh;
}

.window, #launchpad {
  backdrop-filter: blur(20px);
}

#launchpad{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  z-index:10;
  padding:60px 80px; /* уменьшили в 2 раза */
}

.launchpad-grid{
  display:grid;
  grid-template-columns:repeat(8,100px);
  gap:60px; /* большие отступы между иконками */
  width:fit-content;
  height:fit-content;
  color:var(--text-white);
}

.icon{
  text-align:center;
  cursor:pointer;
  animation: fadeIn 0.6s ease forwards;
}

.icon__img img{
  width:90px;
  height:90px;
  border-radius:18px;
  transition: transform var(--transition);
}

.icon:hover img{ transform: scale(1.1); }
.icon__title{ margin-top:8px; font-size:14px; }

@keyframes fadeIn{from{opacity:0;transform:scale(0.8);}to{opacity:1;transform:scale(1);}}

.window{
  position:fixed;
  top:5%;
  left:50%;
  transform:translateX(-50%);
  width:80%;
  height:85%;
  background:var(--bg-primary);
  border-radius:var(--radius);
  box-shadow:0 8px 25px rgba(0,0,0,0.2);
  display:none;
  flex-direction:column;
  overflow:hidden;
}

.window.active{ display:flex; animation:scaleIn 0.3s ease; }

@keyframes scaleIn{ from{transform:translateX(-50%) scale(0.9);opacity:0;} to{transform:translateX(-50%) scale(1);opacity:1;} }

.window-header{
  height:36px;
  display:flex;
  align-items:center;
  padding:0 10px;
  gap:8px;
  background:var(--bg-secondary);
  border-bottom:1px solid var(--border-light);
}

.window-btn{
  width:12px; height:12px; border-radius:50%; cursor:pointer;
}
.btn-close{background:var(--accent-red);}
.btn-minimize{background:#FFBD2E;}
.btn-maximize{background:#28C940;}

.window-header .title{
  font-weight:500;
  flex:1;
  text-align:center;
  font-size:14px;
}

.window-content{ flex:1; display:flex; overflow:hidden; }

#notes .sidebar{
  width:250px;
  background:var(--bg-sidebar);
  border-right:1px solid var(--border-light);
  display:flex; flex-direction:column;
}

#notes .notes-list{ flex:1; overflow-y:auto; }

.note-item{ padding:10px; border-bottom:1px solid var(--border-light); cursor:pointer; }
.note-item:hover{ background:var(--bg-secondary); }
.note-item.active{ background:var(--accent-blue); color:#fff; }

.note-toolbar{ 
  display:flex; 
  justify-content:space-between; 
  padding:12px; 
  border-bottom:1px solid var(--border-light); 
  gap:8px;
}

.note-btn{
  padding:8px 16px;
  border-radius:8px;
  border:none;
  background:var(--accent-blue);
  color:white;
  font-size:13px;
  font-weight:500;
  cursor:pointer;
  transition:all 0.2s ease;
  display:flex;
  align-items:center;
  gap:6px;
}

.note-btn:hover{
  background:#0056CC;
  transform:translateY(-1px);
  box-shadow:0 4px 12px rgba(0,122,255,0.3);
}

.note-btn:active{
  transform:translateY(0);
  box-shadow:0 2px 6px rgba(0,122,255,0.2);
}

.note-btn.secondary{
  background:var(--bg-secondary);
  color:var(--text-primary);
  border:1px solid var(--border-light);
}

.note-btn.secondary:hover{
  background:var(--border-light);
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

.note-editor{ flex:1; padding:20px; overflow-y:auto; outline:none; }

#finder .sidebar{ width:220px; background:var(--bg-sidebar); border-right:1px solid var(--border-light); padding:10px; }

#finder .files{
  flex:1; padding:10px;
  display:grid; grid-template-columns:repeat(auto-fill,100px);
  gap:20px; justify-content:flex-start;
}

.file{text-align:center; cursor:pointer; display:flex; flex-direction:column; align-items:center; gap:2px;}
.file__icon{width:96px;height:96px;}
.file__name{margin-top:4px; font-size:12px; max-width:80px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
.path-bar{
  background:var(--bg-secondary);
  padding:6px 10px;
  font-weight:500;
  border-bottom:1px solid var(--border-light);
  display:flex;
  align-items:center;
  gap:8px;
}

.nav-buttons{
  display:flex;
  gap:4px;
}

.nav-btn{
  width:28px;
  height:28px;
  border-radius:6px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  background:var(--bg-primary);
  border:1px solid var(--border-light);
  transition:all 0.2s ease;
}

.nav-btn:hover{
  background:var(--bg-secondary);
  transform:scale(1.05);
}

.nav-btn:active{
  transform:scale(0.95);
}

.nav-btn svg{
  width:14px;
  height:14px;
  stroke:var(--text-primary);
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
  fill:none;
}
  </style>
</head>
<body>
<div id="launchpad">
  <div class="launchpad-grid" id="iconGrid"></div>
</div>

<div id="notes" class="window">
  <div class="window-header">
    <div class="window-btn btn-close" data-app="notes"></div>
    <div class="window-btn btn-minimize"></div>
    <div class="window-btn btn-maximize"></div>
    <span class="title">Notes</span>
  </div>
  <div class="window-content">
    <div class="sidebar">
      <div class="note-toolbar">
        <button class="note-btn" id="newNoteBtn">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 2v12M2 8h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Новая
        </button>
        <button class="note-btn secondary" id="delNoteBtn">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
            <path d="M3 6h10M8 6v8M5 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
          </svg>
          Удалить
        </button>
      </div>
      <div class="notes-list" id="noteList"></div>
    </div>
    <div class="note-editor" id="editor" contenteditable="true">Выберите заметку или создайте новую.</div>
        </div>
      </div>

<div id="finder" class="window">
  <div class="window-header">
    <div class="window-btn btn-close" data-app="finder"></div>
    <div class="window-btn btn-minimize"></div>
    <div class="window-btn btn-maximize"></div>
    <span class="title">Finder</span>
      </div>
  <div class="path-bar">
      <div class="nav-buttons">
      <div class="nav-btn" id="backBtn" title="Назад">
        <svg viewBox="0 0 16 16">
          <path d="M10 12L6 8L10 4"/>
        </svg>
      </div>
      <div class="nav-btn" id="forwardBtn" title="Вперед">
        <svg viewBox="0 0 16 16">
          <path d="M6 4L10 8L6 12"/>
        </svg>
      </div>
    </div>
    <span id="pathBar">/Users/demo</span>
  </div>
  <div class="window-content">
    <div class="sidebar">
      <strong>Избранное</strong>
      <ul>
        <li>Documents</li>
        <li>Pictures</li>
        <li>Downloads</li>
      </ul>
    </div>
    <div class="files" id="filesGrid"></div>
  </div>
</div>

<script>
const launchpad = document.getElementById('launchpad');
const iconGrid = document.getElementById('iconGrid');
const apps = [
  {id:'finder', name:'Finder', icon:'assets/icons/folder.ico'},
  {id:'notes', name:'Notes', icon:'assets/icons/notes.ico'},
  {id:'theme', name:'Theme', icon:'assets/icons/color_meter.ico'}
];
for(let i=0;i<5;i++){
  apps.forEach(app=>{
    const div=document.createElement('div');
    div.className='icon';
    div.innerHTML=`<div class="icon__img"><img src="${app.icon}" alt="${app.name}"></div><div class="icon__title">${app.name}</div>`;
    div.addEventListener('click',()=>openApp(app.id));
    iconGrid.appendChild(div);
  });
}

function toggleTheme(){
  const html=document.documentElement;
  html.dataset.theme=html.dataset.theme==='dark'?'':'dark';
}

function openApp(id){
  launchpad.style.display='none';
  if(id==='finder'){ finder.classList.add('active'); renderFiles(currentPath);}
  if(id==='notes'){ notes.classList.add('active'); renderNotes();}
  if(id==='theme'){ toggleTheme(); launchpad.style.display='grid'; }
}

document.querySelectorAll('.btn-close').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const app=btn.dataset.app;
    document.getElementById(app).classList.remove('active');
    launchpad.style.display='grid';
  });
});

/* Notes */
const noteList=document.getElementById('noteList');
const editor=document.getElementById('editor');
const newNoteBtn=document.getElementById('newNoteBtn');
const delNoteBtn=document.getElementById('delNoteBtn');
let notesData=[],currentNote=null;

function renderNotes(){
  noteList.innerHTML='';
  notesData.forEach((n,i)=>{
    const div=document.createElement('div');
    div.className='note-item'+(currentNote===i?' active':'');
    div.textContent=n.content.substring(0,30)||'(пусто)';
    div.addEventListener('click',()=>selectNote(i));
    noteList.appendChild(div);
  });
}
function selectNote(i){ currentNote=i; editor.innerText=notesData[i].content; renderNotes(); }
newNoteBtn.onclick=()=>{ notesData.unshift({content:'',date:new Date().toLocaleString()}); selectNote(0); };
delNoteBtn.onclick=()=>{ if(currentNote!==null){ notesData.splice(currentNote,1); currentNote=null; editor.innerText='Выберите заметку или создайте новую.'; renderNotes(); } };
editor.oninput=()=>{ if(currentNote!==null){ notesData[currentNote].content=editor.innerText; renderNotes(); } };

/* Finder */
const finder=document.getElementById('finder');
const filesGrid=document.getElementById('filesGrid');
const pathBar=document.getElementById('pathBar');
const backBtn=document.getElementById('backBtn');
const forwardBtn=document.getElementById('forwardBtn');
const fs={
  '/Users/demo':[
    {name:'Documents', type:'folder', children:[
      {name:'Project1', type:'folder', children:[{name:'file.txt', type:'text_edit'}]},
      {name:'Resume.docx', type:'text_edit'}
    ]},
    {name:'Pictures', type:'folder', children:[]},
    {name:'notes.txt', type:'text_edit'}
  ]
};
let currentPath='/Users/demo';
let pathHistory=['/Users/demo'];
let historyIndex=0;

function renderFiles(path){
  filesGrid.innerHTML='';
  const list=fs[path]||[];
  list.forEach(e=>{
    const el=document.createElement('div');
    el.className='file';
    el.innerHTML=`<div class="file__icon"><img src="assets/icons/${e.type}.ico" alt="${e.name}"></div><div class="file__name">${e.name}</div>`;
    if(e.type==='folder') el.ondblclick=()=>openFolder(path+'/'+e.name,e);
    filesGrid.appendChild(el);
  });
  pathBar.textContent=path;
  updateNavButtons();
}

function openFolder(path,folder){ 
  if(!fs[path]) fs[path]=folder.children; 
  currentPath=path;
  // Добавляем в историю только если это новый путь
  if(pathHistory[historyIndex]!==path){
    pathHistory=pathHistory.slice(0,historyIndex+1);
    pathHistory.push(path);
    historyIndex++;
  }
  renderFiles(path);
}

function updateNavButtons(){
  backBtn.style.opacity=historyIndex>0?'1':'0.3';
  forwardBtn.style.opacity=historyIndex<pathHistory.length-1?'1':'0.3';
}

backBtn.onclick=()=>{
  if(historyIndex>0){
    historyIndex--;
    currentPath=pathHistory[historyIndex];
    renderFiles(currentPath);
  }
};

forwardBtn.onclick=()=>{
  if(historyIndex<pathHistory.length-1){
    historyIndex++;
    currentPath=pathHistory[historyIndex];
    renderFiles(currentPath);
  }
};

</script>
</body>
</html>
